@(eventsList: List[Event])

@import helper._
@import helper.twitterBootstrap._


@main("Twitter Monitor 2.0", "events") {

	<div class="container">
		<h1>Events</h1>
		
	    <div class="jetstrap-highlighted well">
	    	<a href="@routes.EventController.pageCreate()"><button class="btn btn-success">Create new Event</button></a>
	    </div>
	
		<div class="row-fluid">
			<div class="span12">
				<table id="tableEventsList" class="table table-hover">
					<thead>
						<tr>
							<th>#</th>
							<th>Event name</th>
							<th>Keywords</th>
							<th>Situation</th>
							<th>Number Tweets</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						@for(event <- eventsList) {
							<tr>
								<td></td>
								<td>@event.getName()</td>
								<td>
									
									@for((key, value) <- event.getKeywords()) {
										<div class="row-fluid">
											<div class="span6">
												@if(value.name == "TEXT") {
													Contains:		 	
											 	} else {
											 		Following:
											 	}
										 	</div>
											<div class="span6">
												<b>@key</b>								
											</div>
										</div>
										
									}	
								</td>
								
								<td id="situation_@event.getId()">
									@if(event.getSituation().name == "STARTED") {
										<script type="text/javascript"> 
											var interv_@event.getId() = setInterval(function(){
												jQuery('#situation_@event.getId()').html("@event.getSituation() and will finish in "+ellapsedTime(new Date(), new Date(@event.getFinishDate().getTime())));
											},1000);
										</script>
									} else {
										<script type="text/javascript">
											var interv_@event.getId() = setInterval(function(){
												jQuery('#situation_@event.getId()').html("@event.getSituation() "+ellapsedTime(new Date(@event.getFinishDate().getTime()), new Date())+ " ago");
											},1000);
										</script>
									}
								</td>
								<td>@event.getNrTweets()</td>
								<td><a href="@routes.EventController.pageDetails(event.getId().toString())">Details</a></td>
							</tr>
						}		
					</tbody> 
					
				</table>
			</div>
		</div>
	</div>
	
	<script type="text/javascript">
		$(document).ready(function() {
			
			jQuery('#mainContent').fadeIn()
			
		});
	</script>

    
}
